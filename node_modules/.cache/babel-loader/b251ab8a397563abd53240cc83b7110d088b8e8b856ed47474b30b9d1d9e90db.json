{"ast":null,"code":"import _toConsumableArray from\"/home/seraphim/Code/js/calculator-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _slicedToArray from\"/home/seraphim/Code/js/calculator-app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState}from'react';import'./index.css';import{Display}from'../Display';import{Keyboard}from'../Keyboard';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Calculator=function Calculator(){var operations=['%','/','x','+','-'];var _useState=useState([]),_useState2=_slicedToArray(_useState,2),history=_useState2[0],setHistory=_useState2[1];var handlerUpdateHistory=function handlerUpdateHistory(item){setHistory(history.concat([item]));};var handlerClearHistory=function handlerClearHistory(){setHistory([]);};var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),input=_useState4[0],setInput=_useState4[1];var handlerAddToInput=function handlerAddToInput(item){if(!item.includes('#')){if(item==='.'){if(input===''){setInput(\"0\".concat(item));return;}if(input.split(' ')[input.split(' ').length-1]===''){setInput(\"\".concat(input,\"0\").concat(item));return;}else{if(!input.split(' ')[input.split(' ').length-1].includes('.')){setInput(\"\".concat(input).concat(item));}else{return;}}}else{setInput(\"\".concat(input).concat(item));}}else{if(operations.includes(input.slice(' ')[input.slice(' ').length-2])){return;}if(item.includes('#OPER')){if(input.length>0){if(input.split(' ')[input.split(' ').length-1][input.split(' ')[input.split(' ').length-1].length-1]==='.'){setInput(\"\".concat(input,\"0 \").concat(item.split(' ')[1],\" \"));}else{setInput(\"\".concat(input,\" \").concat(item.split(' ')[1],\" \"));}}else{setInput(\"0 \".concat(input,\" \"));}}}};var handlerDelFromInput=function handlerDelFromInput(){if(input.length>0){if(input[input.length-1]===' '){setInput(input.slice(0,-3));}else{setInput(input.slice(0,-1));}}};var handlerClearInput=function handlerClearInput(){setInput('');};var handlerMathResult=function handlerMathResult(){if(operations.includes(input.slice(' ')[input.slice(' ').length-2]))setInput(input.slice(0,-3));var exp=input.split(' ');var updatedExp=[];for(var i=1;i<exp.length;i=i+2){if(['%','/','x'].includes(exp[i])){if(exp[i]==='/'){if(i>=3&&['%','/','x'].includes(exp[i-2])){// eslint-disable-next-line\nvar operation=eval(\"\".concat(updatedExp[updatedExp.length-1],\" / \").concat(exp[i+1]));updatedExp.pop();updatedExp.push(operation);}else{// eslint-disable-next-line\nvar _operation=eval(\"\".concat(exp[i-1],\" / \").concat(exp[i+1]));updatedExp.push(_operation);}}if(exp[i]==='x'){if(i>=3&&['%','/','x'].includes(exp[i-2])){// eslint-disable-next-line\nvar _operation2=eval(\"\".concat(updatedExp[updatedExp.length-1],\" * \").concat(exp[i+1]));updatedExp.pop();updatedExp.push(_operation2);}else{// eslint-disable-next-line\nvar _operation3=eval(\"\".concat(exp[i-1],\" * \").concat(exp[i+1]));updatedExp.push(_operation3);}}}else{console.log(exp.length-1,i+2);if(exp.length-1<i+2)updatedExp.push(exp[i-1],exp[i],exp[i+1]);else updatedExp.push(exp[i-1],exp[i]);}}console.log(2);console.log(updatedExp);// eslint-disable-next-line\nvar result=eval(updatedExp.join(' '));console.log(1);setHistory([].concat(_toConsumableArray(history),[{actions:exp,result:result}]));handlerClearInput();};return/*#__PURE__*/_jsxs(\"div\",{className:\"calculator\",children:[/*#__PURE__*/_jsx(Display,{history:history,input:input}),/*#__PURE__*/_jsx(Keyboard,{updateHistory:handlerUpdateHistory,clearHistory:handlerClearHistory,addToInput:handlerAddToInput,deleteFromInput:handlerDelFromInput,clearInput:handlerClearInput,mathResult:handlerMathResult})]});};export default Calculator;","map":{"version":3,"names":["React","useState","Display","Keyboard","Calculator","operations","history","setHistory","handlerUpdateHistory","item","concat","handlerClearHistory","input","setInput","handlerAddToInput","includes","split","length","slice","handlerDelFromInput","handlerClearInput","handlerMathResult","exp","updatedExp","i","operation","eval","pop","push","console","log","result","join","actions"],"sources":["/home/seraphim/Code/js/calculator-app/src/components/Calculator/index.js"],"sourcesContent":["import React, { useState } from 'react';\nimport './index.css';\n\nimport { Display } from '../Display';\nimport { Keyboard } from '../Keyboard';\n\nconst Calculator = () => {\n  const operations = ['%', '/', 'x', '+', '-'];\n\n  const [history, setHistory] = useState([]);\n  const handlerUpdateHistory = (item) => {\n    setHistory(history.concat([item]));\n  }\n  const handlerClearHistory = () => {\n    setHistory([]);\n  }\n\n  const [input, setInput] = useState('');\n  const handlerAddToInput = (item) => {\n    if (!item.includes('#')) {\n      if (item === '.') {\n        if(input === '') {\n          setInput(`0${item}`);\n          return;\n        }\n        if(input.split(' ')[input.split(' ').length-1] === '') {\n          setInput(`${input}0${item}`);\n          return;\n        } else {\n          if( !input.split(' ')[input.split(' ').length-1].includes('.') ) {\n            setInput(`${input}${item}`);\n          } else {\n            return;\n          }\n        }\n      } else {\n        setInput(`${input}${item}`);\n      }\n    } else {\n      if (operations.includes(input.slice(' ')[input.slice(' ').length-2])) {\n        return;\n      }\n      if (item.includes('#OPER')) {\n        if (input.length > 0) {\n          if (\n            input.split(' ')[input.split(' ').length-1][input.split(' ')[input.split(' ').length-1].length-1] \n            === '.'\n          ) {\n            setInput(`${input}0 ${item.split(' ')[1]} `);\n          } else {\n            setInput(`${input} ${item.split(' ')[1]} `);\n          }\n        } else {\n          setInput(`0 ${input} `);\n        }\n      }\n    }\n  }\n  const handlerDelFromInput = () => {\n    if (input.length > 0) {\n      if(input[input.length-1] === ' ') {\n        setInput(input.slice(0,-3));\n      } else {\n        setInput(input.slice(0,-1));\n      }\n    }\n  }\n  const handlerClearInput = () => {\n    setInput('');\n  }\n  const handlerMathResult = () => {\n    if ( operations.includes(input.slice(' ')[input.slice(' ').length-2]) )\n      setInput(input.slice(0,-3))\n\n    const exp = input.split(' ');\n    let updatedExp = [];\n\n    for ( let i = 1; i < exp.length; i = i+2 ) {\n      if ( ['%', '/', 'x'].includes(exp[i]) ) {\n        if ( exp[i] === '/' ) {\n          if (i >= 3 && ['%', '/', 'x'].includes(exp[i-2]) ) {\n            // eslint-disable-next-line\n            let operation = eval(`${updatedExp[updatedExp.length-1]} / ${exp[i+1]}`);\n            updatedExp.pop();\n            updatedExp.push(operation);\n          } else {\n            // eslint-disable-next-line\n            let operation = eval(`${exp[i-1]} / ${exp[i+1]}`);\n            updatedExp.push(operation);\n          }\n        }\n        if ( exp[i] === 'x' ) {\n          if (i >= 3 && ['%', '/', 'x'].includes(exp[i-2]) ) {\n            // eslint-disable-next-line\n            let operation = eval(`${updatedExp[updatedExp.length-1]} * ${exp[i+1]}`);\n            updatedExp.pop();\n            updatedExp.push(operation);\n          } else {\n            // eslint-disable-next-line\n            let operation = eval(`${exp[i-1]} * ${exp[i+1]}`);\n            updatedExp.push(operation);\n          }\n        }\n      } else {\n        console.log(exp.length-1, i+2)\n        if ( exp.length-1 < i+2 )\n          updatedExp.push(exp[i-1], exp[i], exp[i+1]);\n        else\n          updatedExp.push(exp[i-1], exp[i]);\n      }\n    }\n\n    console.log(2)\n    console.log(updatedExp)\n    // eslint-disable-next-line\n    let result = eval(updatedExp.join(' '));\n    console.log(1)\n    \n    setHistory([...history, { actions: exp, result: result }]);\n    handlerClearInput();\n  }\n\n  return (\n    <div\n      className=\"calculator\"\n    >\n      <Display\n        history={ history }\n        input={input}\n      />\n      <Keyboard\n        updateHistory={ handlerUpdateHistory }\n        clearHistory={ handlerClearHistory }\n        addToInput={ handlerAddToInput }\n        deleteFromInput={ handlerDelFromInput }\n        clearInput={ handlerClearInput }\n        mathResult={ handlerMathResult }\n      />\n    </div>\n  );\n}\n\nexport default Calculator;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}